<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vapi Client SDK</title>
    <script src="https://unpkg.com/@vapi-ai/web@2.1.6/dist/vapi.js"></script>
</head>
<body>
    <!-- This div will be your embed target in Webflow -->
    <div id="vapi-widget"></div>
    
    <script>
        const vapiWidget = document.getElementById('vapi-widget');
        const vapi = new Vapi('bb01b4a0-3597-4ef3-a3c7-f777014ca78f');
        
        // You can later use Vercel env variables here
        const assistantId = '5439b123-43bd-4983-b794-c1b404273d72';

        // Create widget UI
        const button = document.createElement('button');
        button.style.cssText = `
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: #0066ff;
            border: none;
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            z-index: 9999;
        `;

        let isCallActive = false;

        vapi.on('call-start', () => {
            console.log('Call started');
            button.style.background = '#ff0000';
        });

        vapi.on('call-end', () => {
            console.log('Call ended');
            button.style.background = '#0066ff';
            isCallActive = false;
        });

        button.onclick = function() {
            if (!isCallActive) {
                vapi.start(assistantId);
                isCallActive = true;
            } else {
                vapi.stop();
                isCallActive = false;
            }
        };

        vapiWidget.appendChild(button);
    </script>
</body>
</html>
